<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.13.2"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>My Project: Alyn</title>
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
<link href="custom_dark_theme.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">My Project
							</div>
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.13.2 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">Alyn</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md1"></a></p>
<p>Developing an immersive game for children with special needs set in a pool environment is a multifaceted endeavor that requires a comprehensive approach encompassing hardware integration, software development, and a keen understanding of the unique requirements of the target audience. This project aims to leverage cutting-edge technology, including the STM32 microcontroller unit (MCU), ZephyrOS, and Lua scripting, to create a captivating and accessible gaming experience.</p>
<h1><a class="anchor" id="autotoc_md2"></a>
Hardware Integration with STM32 MCU</h1>
<p>The STM32 MCU serves as the central nervous system of the gaming system, providing the necessary processing power and connectivity to interact with various peripherals. Through its versatile GPIO pins, UART, SPI, and I2C interfaces, the STM32 MCU seamlessly interfaces with components such as a screen display, keyboard, and LED integration. The choice of STM32 MCU is strategic due to its reliability, efficiency, and widespread adoption in embedded systems development. Its low-power consumption and robust performance make it ideal for powering portable gaming devices tailored for children with special needs. By harnessing the capabilities of the STM32 MCU, developers can ensure optimal performance and responsiveness, crucial for delivering an engaging gaming experience.</p>
<h1><a class="anchor" id="autotoc_md3"></a>
Operating System Support with ZephyrOS</h1>
<p>ZephyrOS, an open-source real-time operating system, serves as the software foundation for the gaming platform. With its modular architecture and extensive device support, ZephyrOS provides a conducive environment for developing embedded applications with stringent performance requirements. One of the key advantages of ZephyrOS is its scalability, allowing developers to tailor the operating system to suit the specific needs of the gaming platform. By leveraging ZephyrOS's rich set of features, including preemptive multitasking, device drivers, and networking protocols, developers can focus on implementing game logic and user interactions without being encumbered by low-level system concerns. Additionally, ZephyrOS offers robust support for debugging and testing, essential for ensuring the reliability and stability of the gaming platform. Through its integrated development environment (IDE) and comprehensive documentation, developers can streamline the development process and expedite time-to-market for the immersive game.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Scripting Capabilities with Lua Engine</h1>
<p>To empower users with greater control over the gaming experience, the project incorporates a Lua engine for scripting game logic and interactions. Lua's lightweight and flexible nature make it an ideal choice for embedding scripting capabilities into the gaming platform, enabling users to customize gameplay elements to suit their preferences and abilities. By exposing a rich set of Lua APIs for interacting with the game world, developers can empower users to create custom levels, modify game mechanics, and implement accessibility features tailored to the needs of children with special needs. This extensibility not only enhances the replay value of the game but also fosters a sense of ownership and agency among players, promoting engagement and immersion. Furthermore, Lua's simplicity and ease of use make it accessible to developers of all skill levels, facilitating rapid prototyping and iteration. Whether implementing complex game mechanics or fine-tuning visual effects, Lua provides a versatile and expressive scripting language that empowers developers to bring their creative vision to life.</p>
<h1><a class="anchor" id="autotoc_md5"></a>
Install the SW development ennviroment</h1>
<ul>
<li>setup zephyr local path <div class="fragment"><div class="line">export PROJECT=/home/yair/alyn/zephyr-3.4.99/</div>
<div class="line">-----export PROJECT=//mnt/sdb1/yair/stm32/zephyrproject/</div>
</div><!-- fragment --></li>
<li>install west tool <div class="fragment"><div class="line">python3 -m venv $PROJECT/.venv</div>
<div class="line">source $PROJECT/.venv/bin/activate</div>
<div class="line">pip install pyelftools</div>
<div class="line">pip install west</div>
</div><!-- fragment --></li>
<li>Install zephyr 3.4.0 <div class="fragment"><div class="line">cd $PROJECT</div>
<div class="line">west init -m https://github.com/zephyrproject-rtos/zephyr --mr v3.4.0</div>
<div class="line">west update</div>
</div><!-- fragment --></li>
<li>Download the projct <div class="fragment"><div class="line">git clone github.com:yairgd/alyn.git</div>
</div><!-- fragment --></li>
<li>Build &amp; Compile Set Zephyr environment variables <div class="fragment"><div class="line">export ZEPHYR_BASE=${PROJECT}/zephyr</div>
<div class="line">export ZEPHYR_TOOLCHAIN_VARIANT=zephyr</div>
</div><!-- fragment --></li>
</ul>
<p>Create projects using west </p><div class="fragment"><div class="line">west build -b nucleo_f429zi -d  nucleo_f429zi . -- -G&quot;Unix Makefiles&quot;  # For CMake project</div>
<div class="line">west build -b nucleo_f429zi -d  nucleo_f429zi                          # For Ninja project</div>
</div><!-- fragment --><p>Alternatively, create projects directly with CMake </p><div class="fragment"><div class="line">mkdir nucleo_f429zi</div>
<div class="line">cd nucleo_f429zi</div>
<div class="line">cmake -DBOARD=nucleo_f429zi -DOVERLAY_CONFIG=prj.conf -DDTC_OVERLAY_FILE=./boards/nucleo_f429zi.overlay .. # Add &#39;-GNinja&#39; to the CMake command to force Ninja build</div>
</div><!-- fragment --><p> or, to build for linux execution </p><div class="fragment"><div class="line">mkdir native_posix_64</div>
<div class="line">cd native_posix_64</div>
<div class="line">cmake -DBOARD=native_posix_64 -DOVERLAY_CONFIG=prj.conf -DDTC_OVERLAY_FILE=./boards/native_posix_64.overlay ..</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md6"></a>
Using openocd</h1>
<h2><a class="anchor" id="autotoc_md7"></a>
start openiocd</h2>
<p>sudo /home/yair/alyn/zephyr-sdk-0.16.1/sysroots/x86_64-pokysdk-linux/usr/bin/openocd -s /home/yair/alyn/zephyr-3.4.99/zephyr/boards/arm/nucleo_f429zi/support -s /home/yair/alyn/zephyr-sdk-0.16.1/sysroots/x86_64-pokysdk-linux/usr/share/openocd/scripts -f /home/yair/alyn/zephyr-3.4.99/zephyr/boards/arm/nucleo_f429zi/support/openocd.cfg '-c init' '-c targets' -c 'reset init'</p>
<h1><a class="anchor" id="autotoc_md8"></a>
start gdb</h1>
<div class="fragment"><div class="line">cd ~/alyn/project/game-controller/nucleo_f429zi</div>
<div class="line">cgdb -d /home/yair/alyn/./zephyr-sdk-0.16.1/arm-zephyr-eabi/bin/arm-zephyr-eabi-gdb zephyr/zephyr.elf</div>
</div><!-- fragment --> <h1><a class="anchor" id="autotoc_md9"></a>
inside gdb</h1>
<div class="fragment"><div class="line">target remote 127.0.0.1:3333</div>
<div class="line">load</div>
<div class="line">rr</div>
</div><!-- fragment --><p> to set break point: </p><div class="fragment"><div class="line">b game.c:169</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md10"></a>
Vim and YouCompleteMe setup for Qt5</h1>
<p>To allow YouCompleteMe (YCM) to work fine with qt5 project we an use the plugin <a href="https://github.com/rdnetto/YCM-Generator">YCM-Generator</a> to create the file <em>.ycm_extra_conf.py</em> and place it under the main directory of the project. </p><div class="fragment"><div class="line">cd  ~/.vim/bundle/YCM-Generator</div>
<div class="line">./config_gen.py ~/the/project/main/directory/</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md11"></a>
Optinal boards</h1>
<p><a href="https://www.digikey.co.il/he/products/detail/stmicroelectronics/NUCLEO-L4R5ZI/7807685">NUCLEO-L4R5ZI</a> <a href="https://www.digikey.co.il/he/products/detail/stmicroelectronics/NUCLEO-H745ZI-Q/10498890?s=N4IgTCBcDaIHIFUDCAZAogeQLQAkDsALAKwBaAklgIogC6AvkA">NUCLEO-H745ZI-Q</a></p>
<p><a href="https://www.digikey.co.il/he/products/detail/stmicroelectronics/NUCLEO-F429ZI/5806777?s=N4IgTCBcDaIHIFUDCAZAogeQLQDEAsYAnAFoCSIAugL5A">NUCLEO-F429ZI</a></p>
<p><a href="https://www.digikey.co.il/he/products/detail/stmicroelectronics/NUCLEO-F439ZI/9520178?s=N4IgTCBcDaIHIFUDCAZAogeQLQDEAsAzAJwBaAkiALoC%2BQA">NUCLEO-F439ZI</a> <a href="https://docs.zephyrproject.org/latest/boards/arm/nucleo_f429zi/doc/index.html">Zephyr Supported boards</a></p>
<p><a href="https://www.digikey.co.il/he/products/detail/stmicroelectronics/NUCLEO-F767ZI/6004740?s=N4IgTCBcDaIHIFUDCAZAogeQLQDEDsAbHgFoCSIAugL5A">NUCLEO-F767ZI</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
		<script src="custom.js"></script>
	</body>
</html>
